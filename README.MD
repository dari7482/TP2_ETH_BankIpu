# üè¶ KipuBank Smart Contract

## üìò Descripci√≥n del contrato

**KipuBank** es un contrato inteligente desarrollado en Solidity que simula un banco descentralizado b√°sico en la blockchain de Ethereum.  
Su objetivo es permitir a los usuarios **depositar y retirar fondos (ETH)** dentro de ciertos l√≠mites configurados al momento del despliegue.

### ‚öôÔ∏è Caracter√≠sticas principales
- Cada direcci√≥n de usuario tiene su propia **b√≥veda personal** (mapeada por su address).
- Existe un **l√≠mite m√°ximo de retiro** por transacci√≥n (`i_MaxWithdraw`).
- Se define un **tope global de dep√≥sitos** (`i_bankCapGlobalAllowed`), que restringe la capacidad total del banco.
- Se lleva un registro del n√∫mero de **dep√≥sitos y retiros** realizados.
- Los dep√≥sitos y retiros emiten eventos para ser monitoreados f√°cilmente.

### üîê Seguridad
- Las variables cr√≠ticas son **inmutables** (`immutable`), lo que garantiza que los l√≠mites definidos no pueden modificarse despu√©s del despliegue.
- Los retiros fallidos lanzan un error personalizado `withdraw_TrasactationFail`.
- Solo el **propietario de los fondos** puede retirarlos.

---

## üöÄ Instrucciones de despliegue

1. **Abrir el contrato en Remix IDE**
   - Copia el c√≥digo fuente del contrato `KipuBank.sol` en Remix.
   - Selecciona el compilador Solidity versi√≥n `0.8.30`.
   - Compila el contrato.

2. **Configurar los par√°metros del constructor**
   El contrato requiere dos valores al momento del despliegue:
   - `_Max_Withdraw`: monto m√°ximo permitido para retiro por transacci√≥n (en wei).
   - `_bankCapGlobalAllowed`: capacidad total global del banco (en wei).


3. **Elegir el entorno de ejecuci√≥n**
- En Remix, selecciona ‚Äú**Environment ‚Üí Remix VM (Prague)**‚Äù o una red de prueba como **Sepolia**.
- Aseg√∫rate de tener fondos suficientes (ETH de prueba).

4. **Desplegar el contrato**
- Haz clic en **Deploy** y confirma la transacci√≥n.
- Una vez desplegado, ver√°s el contrato en el panel ‚ÄúDeployed Contracts‚Äù.

---

## üí¨ C√≥mo interactuar con el contrato

### 1. Depositar fondos
- Usa la funci√≥n `depositAmount()`.
- En Remix, en el campo **Value**, ingresa la cantidad de ETH (en wei) que deseas depositar.
- Presiona **transact**.
- Se emitir√° el evento `Deposit_amountSaved(address user, uint256 amount)`.

### 2. Retirar fondos
- Usa la funci√≥n `withdrawAmount(uint256 _amount)`.
- El monto ingresado debe ser:
- Mayor que cero.
- Menor que `i_MaxWithdraw`.
- Solo podr√°s retirar fondos que hayas depositado previamente.
- Si la transacci√≥n se completa, se emitir√° el evento `Retire_InProcess`.

### 3. Consultar tu balance
- Llama a la funci√≥n `_userBalance()`.
- Retorna el monto total de ETH depositado por el usuario que llama.

### 4. Consultar estad√≠sticas globales
- Llama a la funci√≥n `recordMovementTolta()`.
- Devuelve dos valores:
- N√∫mero total de dep√≥sitos realizados (`_deposit`).
- N√∫mero total de retiros (`_extraction`).

---

## üßæ Eventos

| Evento | Descripci√≥n |
|--------|--------------|
| `Deposit_amountSaved(address user, uint256 amount)` | Se emite cuando un usuario deposita fondos. |
| `Retire_InProcess(address user, uint256 amount)` | Se emite cuando un usuario inicia un retiro. |

---

## üß† Autor
**Desarrollado por:** Dario Cesar Atach  
**Licencia:** MIT  
**Versi√≥n del compilador:** Solidity 0.8.30  
**Framework:** OpenZeppelin `Strings.sol` para manejo seguro de conversiones num√©ricas.

---


